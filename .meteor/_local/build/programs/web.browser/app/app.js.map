{"version":3,"sources":["meteor://üíªapp/client/main.js","meteor://üíªapp/imports/ui/App.js","meteor://üíªapp/imports/ui/Login.js","meteor://üíªapp/imports/ui/Menu.js","meteor://üíªapp/imports/ui/Panel.js","meteor://üíªapp/imports/ui/Register.js","meteor://üíªapp/imports/ui/Timeline.js","meteor://üíªapp/imports/helper.js","meteor://üíªapp/imports/models.js","meteor://üíªapp/imports/session.js","meteor://üíªapp/redux/actions.js","meteor://üíªapp/redux/index.js"],"names":["Template","module","watch","require","v","ReactiveVar","Meteor","React","render","HashRouter","Provider","createStore","reducer","App","store","startup","document","getElementById","export","Component","Route","Switch","Register","Login","Panel","componentWillMount","Session","Helper","Menu","loginTeller","props","state","email","password","componentDidMount","isLoggedIn","history","push","handleSubmit","e","preventDefault","call","err","data","setState","set","_id","dispatch","console","log","bind","target","value","NavLink","connect","logoutTeller","teller","exportDefault","Showdown","withTracker","ReactDOM","Timeline","Tellers","Subjects","Converter","converter","new_story_content","new_story_subjects","subjects","new_subject","update_subjects_timer","has_received_subjects","componentDidUpdate","handleSubmitNewStory","createSubjectsFromString","content","findDOMNode","refs","subjects_string","split","map","subject","name","trim","handleSubmitNewSubject","concat","teller_id","removeSubject","filter","i","__html","makeHtml","trackedComponent","findOne","get","find","$in","fetch","connectedComponent","Stories","loading","story_ids","stories","setPageScrollListener","getStories","window","onscroll","d","documentElement","offset","scrollTop","innerHeight","height","offsetHeight","padding","forEach","story","logout","Mongo","Collection","PersistentSession","localStorage","key","all","getAll","setAll","JSON","parse","stringify","LOGIN_TELLER","LOGOUT_TELLER","type","payload","Actions","initial_state","action","Object","assign"],"mappings":"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","file":"/app.js","sourcesContent":["import { Template } from 'meteor/templating';\nimport { ReactiveVar } from 'meteor/reactive-var';\n\nimport { Meteor } from 'meteor/meteor';\nimport React from 'react';\nimport { render} from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\n\nimport { Provider } from 'react-redux';\nimport { createStore } from 'redux'\nimport reducer from '../redux'\n\nimport App from '../imports/ui/App.js';\n\nconst store = createStore(reducer);\n\nMeteor.startup(() => {\n  render((\n    <Provider store={store}>\n    <HashRouter>\n    <App />\n  </HashRouter>\n  </Provider>\n), document.getElementById('root'));\n});\n\n// import './main.html';\n\n// Template.hello.onCreated(function helloOnCreated() {\n//   // counter starts at 0\n//   this.counter = new ReactiveVar(0);\n// });\n//\n// Template.hello.helpers({\n//   counter() {\n//     return Template.instance().counter.get();\n//   },\n// });\n//\n// Template.hello.events({\n//   'click button'(event, instance) {\n//     // increment the counter when button is clicked\n//     instance.counter.set(instance.counter.get() + 1);\n//   },\n// });\n","import React, { Component } from 'react';\n\nimport { Route, Switch } from 'react-router-dom';\n\nimport Register from './Register';\nimport Login from './Login';\nimport Panel from './Panel';\n\nexport default class App extends Component {\n  componentWillMount(){\n      // aqui, salva no redux o valor da sess√£o\n  }\n\n  render() {\n    return (\n      <main>\n        <Switch>\n          <Route exact component={Login} path='/' />\n          <Route component={Register} path='/register' />\n          <Route component={Login} path='/login' />\n          <Route component={Panel} path='/panel' />\n        </Switch>\n      </main>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport Session from '../session';\nimport Helper from '../helper';\nimport Menu from './Menu';\n\nimport { loginTeller } from '../../redux/actions'\n\nexport default class Login extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      email: '',\n      password: ''\n    };\n  }\n\n  componentDidMount(){\n    if(Helper.isLoggedIn()){\n      this.props.history.push('/panel');\n    }\n  }\n\n  handleSubmit(e){\n    e.preventDefault();\n\n    Meteor.call('login.teller', this.state, (err, data)=>{\n      if(!err){\n        if(data){\n          this.setState({\n            email: '',\n            password: ''\n          });\n\n          Session.set('teller_id', data._id);\n\n          this.props.dispatch(loginTeller(data));\n          this.props.history.push('/panel');\n        }\n      }else{\n        console.log('err', err)\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <Menu />\n        <h1>Login</h1>\n        <form className=\"login-form\" onSubmit={this.handleSubmit.bind(this)}>\n          <input name=\"email\" placeholder=\"email\" onChange={ (e)=>{ this.setState({email: e.target.value}) } }/>\n          <input name=\"password\" placeholder=\"password\" onChange={ (e)=>{ this.setState({password: e.target.value}) } }/>\n          <button>Send</button>\n        </form>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport Session from '../session';\nimport Helper from '../helper';\nimport { NavLink } from 'react-router-dom';\n\nimport { connect } from 'react-redux'\nimport { logoutTeller } from '../../redux/actions'\n\nclass Menu extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n    };\n\n    this.isLoggedIn = Helper.isLoggedIn();\n  }\n  //\n  // componentWillMount(){\n  //   if(Helper.isLoggedIn()){\n  //\n  //   }\n  // }\n\n  componentWillMount(){\n    console.log('this.props', this.props)\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n      {\n        this.props.teller ? (\n          <div>\n          <span> Hello, { this.props.teller.email } </span>\n          <span to=\"/logout\" onClick={(e)=>{\n            this.props.dispatch(logoutTeller);\n          }}>logout</span>\n          </div>\n        ) : (\n          <div>\n          <NavLink to=\"/login\">login</NavLink>\n          <NavLink to=\"/register\">register</NavLink>\n          <span to=\"/logout\" onClick={(e)=>{\n            this.props.dispatch(logoutTeller());\n          }}>logout</span>\n          </div>\n        )\n      }\n      </div>\n    );\n  }\n}\n\nexport default connect(function(props){\n  return props;\n})(Menu);\n","import React, { Component } from 'react';\n// import { Session } from 'meteor/session';\nimport Session from '../session';\nimport { Showdown } from 'meteor/markdown';\nimport { withTracker } from 'meteor/react-meteor-data';\nimport ReactDOM from 'react-dom'\nimport { Template } from 'meteor/templating';\n\nimport Timeline from './Timeline';\nimport { Tellers, Subjects } from '../models';\nimport '../css/style.css';\nimport Menu from './Menu'\nimport Helper from '../helper'\n\nimport { connect } from 'react-redux'\n\nconst Converter = new Showdown.converter();\n\nclass Panel extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      new_story_content: '',\n      new_story_subjects: '',\n      subjects: [],\n      new_subject: ''\n    };\n\n    this.update_subjects_timer;\n    this.has_received_subjects = false;\n    this.isLoggedIn = Helper.isLoggedIn();\n\n    // this.foo = new ReactiveVar( false );\n    // this.foo.set({'teste': true})\n  }\n\n  componentDidUpdate(){\n\n    console.log('will update', this.props.teller);\n    if(this.props.subjects && !this.has_received_subjects){\n      this.has_received_subjects = true;\n    }\n\n    // alert(this.foo.get())\n  }\n\n  handleSubmitNewStory(e){\n    e.preventDefault();\n\n    // cria os objectos de subject\n\n    var subjects = this.createSubjectsFromString(this.state.new_story_subjects);\n\n    Meteor.call('panel.newStory', {content: this.state.new_story_content, subjects: subjects}, (err, data)=>{\n      if(!err){\n        console.log('data', data)\n        ReactDOM.findDOMNode(this.refs['new-story-subjects']).value = '';\n        ReactDOM.findDOMNode(this.refs['new-story-content']).value = '';\n        this.setState({new_story_content: ''})\n      }else{\n        console.log('err', err)\n      }\n    });\n  }\n\n  createSubjectsFromString(subjects_string){\n    var subjects = subjects_string.split(',').map((subject)=>{\n      return {\n        name: subject.trim()\n      };\n    });\n\n    return subjects;\n  }\n\n  handleSubmitNewSubject(e){\n    e.preventDefault();\n    var subjects = this.props.subjects;\n    subjects = subjects.concat(this.createSubjectsFromString(this.state.new_subject));\n    Meteor.call('panel.updateSubjects', {teller_id: this.props.teller._id, subjects: subjects}, (err, data)=>{\n      if(!err){\n        ReactDOM.findDOMNode(this.refs['new-subject']).value = '';\n      }else{\n        console.log('err', err)\n      }\n    });\n  }\n\n  removeSubject(_id){\n    console.log('subjects ANTES remover',  this.props.subjects)\n    var subjects = this.props.subjects;\n    subjects = subjects.filter((subject)=>{\n      return subject._id !== _id;\n    });\n\n    Meteor.call('panel.updateSubjects', {teller_id: this.props.teller._id, subjects: subjects}, (err, data)=>{\n      if(!err){\n        console.log('subjects', data)\n      }else{\n        console.log('err', err)\n      }\n    });\n  }\n\n  render() {\n    if(this.props.subjects){\n      var subjects = this.props.subjects.map((subject, i)=>{\n        return (\n          <span key={i}>{subject.name} <button onClick={()=>{\n            this.removeSubject(subject._id)\n          }}>Remover</button></span>\n        )\n      })\n    }\n    // if(this.props.teller){\n    return (\n      <div className=\"container\">\n        <Menu />\n      {\n        (this.props.teller) ? (\n          <div>\n          <div>Seja bem vindo, {this.props.teller.email}</div>\n\n          <div>\n          { subjects }\n          </div>\n\n          <form id=\"new-subject-form\" onSubmit={this.handleSubmitNewSubject.bind(this)}>\n          <input id=\"new-subject\" ref=\"new-subject\"\n          onChange={(e)=>{\n            this.setState({new_subject: e.target.value});\n          }}\n          />\n          </form>\n\n          <form className='new-story-form' onSubmit={this.handleSubmitNewStory.bind(this)}>\n          <div id='new-story-preview' dangerouslySetInnerHTML={{__html: Converter.makeHtml(this.state.new_story_content)}} />\n\n          <textarea id='markdown-text' ref=\"new-story-content\"\n          onChange={(e)=>{\n            this.setState({new_story_content: e.target.value})\n          }}\n          defaultValue={this.state.new_story_content}>\n          </textarea>\n\n          <input id=\"new-story-subjects\" ref=\"new-story-subjects\"\n          defaultValue={this.state.new_story_subjects}\n          onChange={(e)=>{\n            this.setState({new_story_subjects: e.target.value})\n          }}\n          />\n\n          <button>Send</button>\n          </form>\n\n          <Timeline subjects={this.props.teller.subjects} />\n          </div>\n        ) : null\n      }\n      </div>\n    );\n    // }else this.props.history.push('/panel');\n  }\n}\n\nvar trackedComponent = withTracker((props) =>{\n  console.log('props', props)\n  var teller = Tellers.findOne({_id: Session.get('teller_id')});\n  return {\n    teller: teller,\n    subjects: teller ? Subjects.find({_id: {$in: teller.subjects}}).fetch() : []\n  }\n})(Panel);\n\nvar connectedComponent = connect(function(state){\n  console.log('state', state)\n  return state;\n})(trackedComponent);\n\nexport default connectedComponent;\n","import React, { Component } from 'react';\n// import { Session } from 'meteor/session'\nimport Session from '../session';\nimport Helper from '../helper';\n\nimport { Tellers } from '../models';\n\nimport Menu from './Menu'\nimport { loginTeller } from '../../redux/actions'\n\nexport default class Register extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      email: '',\n      password: ''\n    };\n  }\n\n  componentDidMount(){\n    if(Helper.isLoggedIn()){\n      this.props.history.push('/panel');\n    }\n  }\n\n  componentWillMount(){\n\n  }\n\n  handleSubmit(e){\n    e.preventDefault();\n\n    Meteor.call('register.teller', this.state, (err, data)=>{\n      if(!err){\n        this.setState({\n          email: '',\n          password: ''\n        });\n\n        Session.set('teller_id', data._id);\n\n        this.props.dispatch(loginTeller(data));\n        this.props.history.push('/panel');\n      }else{\n        console.log('err', err)\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <h1>Register</h1>\n        <form className=\"register-form\" onSubmit={this.handleSubmit.bind(this)}>\n          <input value={this.state.email} ref=\"email\" name=\"email\" placeholder=\"email\" onChange={ (e)=>{ this.setState({email: e.target.value}) } }/>\n          <input value={this.state.password} ref=\"password\" name=\"password\" placeholder=\"password\" onChange={ (e)=>{ this.setState({password: e.target.value}) } }/>\n          <button>Send</button>\n        </form>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { Session } from 'meteor/session';\nimport { Showdown } from 'meteor/markdown';\nimport { withTracker } from 'meteor/react-meteor-data';\n\nimport { Stories } from '../models';\n\nconst Converter = new Showdown.converter();\n\nclass Timeline extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      loading: false,\n      story_ids: [],\n      stories: []\n    };\n\n    this.setPageScrollListener();\n  }\n\n  componentDidMount(){\n    this.getStories();\n  }\n\n  setPageScrollListener(){\n    window.onscroll = ()=>{\n      var d = document.documentElement;\n      var offset = d.scrollTop + window.innerHeight;\n      var height = d.offsetHeight;\n      var padding = 10;\n\n      if (offset >= height-padding) {\n        // Get more stories\n        this.getStories();\n      }\n    };\n  }\n\n  getStories(){\n    if(!this.state.loading){\n      this.setState({loading: true});\n      Meteor.call('timeline.getStories', {subjects: this.props.subjects, story_ids: this.state.story_ids}, (err, data)=>{\n        if(!err){\n          var story_ids = this.state.story_ids;\n          data.forEach((story)=>{\n            story_ids.push(story._id);\n          });\n\n          var stories = this.state.stories.concat(data);\n\n          this.setState({loading: false, story_ids, stories});\n        }else{\n          this.setState({loading: false});\n        }\n      });\n    }\n  }\n\n  render() {\n    var stories = this.state.stories.map( (story)=>{\n      return (\n        <div key={story._id} className='story'>\n        <div id='content' dangerouslySetInnerHTML={{__html: Converter.makeHtml(story.content)}} />\n        </div>\n      );\n    } );\n\n    return (\n      <div className=\"container\">\n      { stories }\n      </div>\n    )\n  }\n}\n\nexport default withTracker(({subjects}) =>{\n  return {};\n\n  // A outra prossibilidade seria modificar vari√°veis dentro deste m√≥dulo\n  // para as vari√°veis reativas, por exemplo, de stories,\n  // fizesse as buscas\n  // mas o minimongo n√£o permitiria em produ√ß√£o\n\n  // var stories_from_subjects = Stories.find({subjects: {$in: subjects}}).fetch();\n  // var ids = stories_from_subjects.map((story)=>{\n  //   return story._id;\n  // });\n  //\n  // var more_stories = Stories.find({_id: {$nin: ids}}).fetch();\n  //\n  // return {\n  //   stories: stories_from_subjects.concat(more_stories)\n  // }\n})(Timeline);\n","import Session from './session';\n\nexport default class Helper{\n  static isLoggedIn(){\n    var teller_id = Session.get('teller_id');\n    if(teller_id) return true;\n    return false\n  }\n    static logout(){\n      Session.set('teller_id', null);\n      return false;\n    }\n}\n","import { Mongo } from 'meteor/mongo';\n\nexport const Tellers = new Mongo.Collection('teller');\nexport const Stories = new Mongo.Collection('story');\nexport const Subjects = new Mongo.Collection('subject');\n","class PersistentSession {\n  constructor(){\n    if(!('__miniblog__' in localStorage)){\n      localStorage['__miniblog__'] = '{}';\n    }\n  }\n\n  get(key){\n    var all = getAll();\n    return all[key];\n  }\n\n  set(key, value){\n    var all = getAll();\n    all[key] = value;\n    setAll(all);\n  }\n}\n\nfunction getAll(){\n  var all = localStorage['__miniblog__'];\n  try{\n    return JSON.parse(all);\n  }catch(e){\n    console.log(e);\n    return null;\n  }\n}\n\nfunction setAll(all){\n  localStorage['__miniblog__'] = JSON.stringify(all);\n}\n\nexport default Session = new PersistentSession();\n","export const LOGIN_TELLER = 'LOGIN_TELLER';\nexport const LOGOUT_TELLER = 'LOGOUT_TELLER';\n\nexport function loginTeller(teller){\n  return {\n    type: LOGIN_TELLER,\n    payload: {\n      teller: teller\n    }\n  };\n}\n\nexport function logoutTeller(){\n  return {\n    type: LOGOUT_TELLER,\n    payload: true\n  };\n}\n","import * as Actions from './actions';\nimport Session from '../imports/session';\n\nconst initial_state = {\n  name: 'foo',\n  teller: null\n};\n\nexport default function(state = initial_state, action){\n  console.log('Reducer >> ', state, action);\n\n  if(action.type == Actions.loginTeller){\n    Session.set('teller', action.teller);\n    return Object.assign({}, state, {teller: action.teller});\n  }\n\n  if(action.type == Actions.logoutTeller){\n    Session.set('teller', null);\n    return Object.assign({}, state, {teller: null});\n  }\n\n  return state;\n}\n"]}